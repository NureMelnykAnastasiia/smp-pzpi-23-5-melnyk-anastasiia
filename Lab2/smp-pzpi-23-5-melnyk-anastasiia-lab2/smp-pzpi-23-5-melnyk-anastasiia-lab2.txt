Міністерство освіти і науки України 



Харківський національний університет радіоелектроніки
Факультет комп'ютерних наук
Кафедра програмної інженерії




Звіт
з лабораторної роботи № 2
з дисципліни: "Скриптові мови програмування"











Виконала:
ст. гр. ПЗПІ-23-5
Мельник А.

Перевірив:
ст. викл. каф. ПІ
Сокорчук І. П.















Харків - 2025

1 ІСТОРІЯ ЗМІН

№ДатаВерсія звітуОпис змін та виправлень120.05.20250.1Створено розділи "Історія змін", "Завдання", "Опис виконаної роботи", "Висновки", оформлено додатки


2 ЗАВДАННЯ

     Метою лабораторної роботи є розробка консольного застосунку на мові PHP, що моделює функціональність продовольчого магазину. Застосунок повинен забезпечити взаємодію з користувачем через меню, що дозволяє виконувати базові операції: вибір товарів, перегляд підсумкового рахунку, налаштування профілю користувача та вихід із програми.


3 ОПИС ВИКОНАНОЇ РОБОТИ

     Програма складається з двох основних файлів: data.php, де міститься набір даних і головне меню програми, та smp-pzpi-23-5-melnyk-anastasiia-lab2-code.php, який реалізує основну логіку взаємодії з користувачем. Повний код наведено в додатку Б.
     Файл data.php містить масив $itemsList, у якому збережено перелік товарів. 
  1 $itemsList = [
  2     1 => ['title' => 'Молоко пастеризоване', 'cost' => 12],
  3     2 => ['title' => 'Хліб чорний', 'cost' => 9],
  4     3 => ['title' => 'Сир білий', 'cost' => 21],
  5     4 => ['title' => 'Сметана 20%', 'cost' => 25],
  6     5 => ['title' => 'Кефір 1%', 'cost' => 19],
  7     6 => ['title' => 'Вода газована', 'cost' => 18],
  8     7 => ['title' => 'Печиво "Весна"', 'cost' => 14],
  9 ];
     Кожен товар представлено у вигляді асоціативного масиву з полями title (назва товару) та cost (його ціна). Ідентифікатори товарів задано як ключі цього масиву. Наприклад, під ключем 1 зберігається продукт з назвою "Молоко пастеризоване" і вартістю 12 гривень. Така структура дозволяє зручно звертатися до товарів за їхнім порядковим номером. Також у цьому файлі визначено функцію printMenu(), яка виводить у консоль привітальне повідомлення з основним меню, де користувачу пропонується вибрати одну з доступних дій: перегляд товарів, перегляд рахунку, налаштування профілю або вихід.
  1 function printMenu()
  2 {
  3     echo "################################\n";
  4     echo "# ПРОДОВОЛЬЧИЙ МАГАЗИН \"ВЕСНА\" #\n";
  5     echo "################################\n";
  6     echo "1 Вибрати товари\n";
  7     echo "2 Отримати підсумковий рахунок\n";
  8     echo "3 Налаштувати свій профіль\n";
  9     echo "0 Вийти з програми\n";
 10     echo "Введіть команду: ";
 11 }
     Основний файл підключає попередній через команду require_once "data.php", що дозволяє використовувати дані та функції з нього. Далі в програмі визначено три основні функції: items(), printBill() та user(), кожна з яких відповідає за окрему частину функціоналу.
     Функція items(&$list, &$basket) (див. додаток Б.1, 4-64 рядок) реалізує взаємодію з користувачем при виборі товарів. Вона динамічно визначає максимальну довжину назви товару, щоби красиво вирівнювати таблицю незалежно від ширини назв. У циклі виводиться список товарів із відповідними номерами та цінами. Користувач вводить номер товару, а потім кількість одиниць. Якщо введено нуль - товар видаляється з кошика. Якщо введена кількість допустима (від 1 до 99), товар додається або оновлюється в кошику. Після кожної дії виводиться поточний вміст кошика у вигляді таблиці.
     Функція printBill($list, $basket) (див. додаток Б.1, 66-115 рядок) відповідає за виведення підсумкового рахунку. Якщо кошик порожній, користувачу повідомляється про це. Інакше програма аналізує ширину всіх стовпців (назви, ціни, кількості, вартості) і формує красиво вирівняну таблицю із розрахованими підсумковими сумами для кожного товару та загальною вартістю всіх покупок. Всі розрахунки виконуються прямо у функції, а назви товарів вирівнюються з урахуванням українських символів (через preg_match_all, що дозволяє коректно обраховувати довжину назви у символах, а не байтах).
     Функція user() (див. додаток Б.1, 117-140 рядок) дозволяє користувачу ввести своє ім'я та вік. Дані валідуються на коректність: ім'я повинно містити хоча б одну літеру і складатися тільки з літер, апострофів, дефісів або пробілів, а вік - бути числом у діапазоні від 7 до 150 років. Неправильне введення спричиняє вивід повідомлення про помилку і повторне запрошення.
     В основному тілі програми створюється масив $bucket, який виконує роль кошика покупця. Потім запускається нескінченний цикл (див. додаток Б.1, 144-166 рядок), у якому відображається головне меню за допомогою printMenu() і зчитується введена команда. Залежно від вибору викликається одна з трьох основних функцій або програма завершується. При введенні невірної команди система інформує користувача про помилку.

4 ВИСНОВКИ

     Отже, у ході виконання роботи було реалізовано консольну програму магазину "Весна" на мові PHP, що моделює базову систему взаємодії з користувачем у форматі торговельного терміналу. Логіка програми розділена на дві частини: у першому файлі зберігається список доступних товарів із назвами та цінами, та вивід головного меню програми а в другому реалізовано основну функціональність, яка охоплює вибір товарів, облік замовлень у кошику, формування підсумкового рахунку та введення персональних даних користувача. 
     Завдяки грамотній структурі коду та використанню регулярних виразів забезпечено підтримку української мови, коректне форматування виводу та перевірку введених даних. Реалізація також акцентує увагу на користувацькому досвіді: вивід структуровано у вигляді таблиць, а помилки супроводжуються зрозумілими повідомленнями.
     


ДОДАТОК А
Відеозапис

Відеозапис презентації результатів лабораторної роботи: https://{URL}

Хронологічний опис відеозапису:

00:00 - Вступ



ДОДАТОК Б
Програмний код
Б.1 Код основного файлу програми

GitHub репозиторій: https://github.

  1 <?php
  2 require_once "data.php";
  3 
  4 function items(&$list, &$basket)
  5 {
  6     $maxLen = 0;
  7     foreach ($list as $product) {
  8         preg_match_all('/./us', $product['title'], $chars);
  9         $maxLen = max($maxLen, count($chars[0]));
 10     }
 11 
 12     while (true) {
 13         echo "\n№  НАЗВА" . str_repeat(" ", $maxLen - 5 + 2) . "ЦІНА\n";
 14         foreach ($list as $id => $product) {
 15             preg_match_all('/./us', $product['title'], $chars);
 16             $padding = str_repeat(" ", $maxLen - count($chars[0]) + 2);
 17             printf("%-2d %s%s%d\n", $id, $product['title'], $padding, $product['cost']);
 18         }
 19
 20         echo "   -----------\n";
 21         echo "0  ПОВЕРНУТИСЯ\n";
 22         echo "Виберіть товар: ";
 23         $input = trim(fgets(STDIN));
 24
 25         if (!ctype_digit($input)) {
 26             echo "ПОМИЛКА! НЕОБХІДНО ВВЕСТИ ЧИСЛО\n\n";
 27             continue;
 28         }
 29
 30         $selected = (int)$input;
 31         if ($selected === 0) break;
 32
 33         if (!isset($list[$selected])) {
 34             echo "ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНИЙ НОМЕР ТОВАРУ\n";
 35             continue;
 36         }
 37
 38         $item = $list[$selected];
 39         echo "Вибрано: {$item['title']}\n";
 40         echo "Введіть кількість, штук: ";
 41         $amount = (int)trim(fgets(STDIN));
 42
 43         if ($amount < 0 || $amount >= 100) {
 44             echo "ПОМИЛКА! ВКАЗАНО НЕПРАВИЛЬНУ КІЛЬКІСТЬ ТОВАРУ\n\n";
 45             continue;
 46         }
 47
 48         if ($amount === 0) {
 49             unset($basket[$selected]);
 50             echo "ВИДАЛЯЮ З КОШИКА\n";
 51         } else {
 52             $basket[$selected] = $amount;
 53         }
 54
 55         echo "У КОШИКУ:\nНАЗВА" . str_repeat(" ", $maxLen - 5 + 2) . "КІЛЬКІСТЬ\n";
 56         foreach ($basket as $k => $v) {
 57             $title = $list[$k]['title'];
 58             preg_match_all('/./us', $title, $chars);
 59             $pad = str_repeat(" ", $maxLen - count($chars[0]) + 2);
 60             echo $title . $pad . $v . "\n";
 61         }
 62         echo "\n";
 63     }
 64 }
 65
 66 function printBill($list, $basket)
 67 {
 68     if (empty($basket)) {
 69         echo "КОШИК ПОРОЖНІЙ\n";
 70         return;
 71     }
 72
 73     $nameW = 5;
 74     $priceW = 4;
 75     $qtyW = 9;
 76     $sumW = 8;
 77
 78     foreach ($basket as $k => $qty) {
 79         $title = $list[$k]['title'];
 80         $cost = $list[$k]['cost'];
 81         $total = $qty * $cost;
 82
 83         preg_match_all('/./us', $title, $chars);
 84         $nameW = max($nameW, count($chars[0]));
 85         $priceW = max($priceW, strlen((string)$cost));
 86         $qtyW = max($qtyW, strlen((string)$qty));
 87         $sumW = max($sumW, strlen((string)$total));
 88     }
 89
 90     echo "№  НАЗВА"
 91         . str_repeat(" ", $nameW - 5 + 2)
 92         . "ЦІНА" . str_repeat(" ", $priceW - 4 + 2)
 93         . "КІЛЬКІСТЬ" . str_repeat(" ", $qtyW - 9 + 2)
 94         . "ВАРТІСТЬ\n";
 95
 96     $line = 1;
 97     $sumAll = 0;
 98
 99     foreach ($basket as $k => $qty) {
100         $title = $list[$k]['title'];
101         $cost = $list[$k]['cost'];
102         $subtotal = $qty * $cost;
103         $sumAll += $subtotal;
104
105         preg_match_all('/./us', $title, $chars);
106         $namePad = str_repeat(" ", $nameW - count($chars[0]) + 2);
107         $costPad = str_repeat(" ", $priceW - strlen((string)$cost) + 2);
108         $qtyPad = str_repeat(" ", $qtyW - strlen((string)$qty) + 2);
109
110         echo "$line  $title$namePad$cost$costPad$qty$qtyPad$subtotal\n";
111         $line++;
112     }
113
114     echo "РАЗОМ ДО СПЛАТИ: $sumAll\n";
115 }
116
117 function user()
118 {
119     while (true) {
120         echo "Ваше імʼя: ";
121         $username = trim(fgets(STDIN));
122         $isValid = preg_match("/^[А-Яа-яЁёЇїІіЄєҐґA-Za-z''\- ]+$/u", $username);
123         $hasLetters = preg_match("/[А-Яа-яЁёЇїІіЄєҐґA-Za-z]/u", $username);
124         if ($isValid && $hasLetters) break;
125         echo "ПОМИЛКА! Імʼя повинно містити хоча б одну літеру та може містити лише літери, апостроф "'", дефіс "-", пробіл\n";
126     }
127
128     while (true) {
129         echo "Ваш вік: ";
130         $ageStr = trim(fgets(STDIN));
131         if (!is_numeric($ageStr)) {
132             echo "ПОМИЛКА! Вік має бути числом\n";
133             continue;
134         }
135         $age = (int)$ageStr;
136         if ($age >= 7 && $age <= 150) break;
137         echo "ПОМИЛКА! Користувач не може бути молодшим 7-ми або старшим 150-ти років\n";
138     }
139     echo "\n";
140 }
141
142 $bucket = [];
143
144 while (true) {
145     printMenu();
146     $action = trim(fgets(STDIN));
147     echo "\n";
148
149     switch ($action) {
150         case "1":
151             items($itemsList, $bucket);
152             break;
153         case "2":
154             printBill($itemsList, $bucket);
155             break;
156         case "3":
157             user();
158             break;
159         case "0":
160             exit;
161         default:
162             echo "ПОМИЛКА! Невідома команда. Спробуйте ще раз\n";
163     }
164
165     echo "\n";
166 }


Б.2 Додатковий файл з даними

GitHub репозиторій: https://github.

  1 <?php
  2 
  3 $itemsList = [
  4     1 => ['title' => 'Молоко пастеризоване', 'cost' => 12],
  5     2 => ['title' => 'Хліб чорний', 'cost' => 9],
  6     3 => ['title' => 'Сир білий', 'cost' => 21],
  7     4 => ['title' => 'Сметана 20%', 'cost' => 25],
  8     5 => ['title' => 'Кефір 1%', 'cost' => 19],
  9     6 => ['title' => 'Вода газована', 'cost' => 18],
 10     7 => ['title' => 'Печиво "Весна"', 'cost' => 14],
 11 ];
 12
 13 function printWelcome()
 14 {
 15     echo "################################\n";
 16     echo "# ПРОДОВОЛЬЧИЙ МАГАЗИН \"ВЕСНА\" #\n";
 17     echo "################################\n";
 18     echo "1 Вибрати товари\n";
 19     echo "2 Отримати підсумковий рахунок\n";
 20     echo "3 Налаштувати свій профіль\n";
 21     echo "0 Вийти з програми\n";
 22     echo "Введіть команду: ";
 23 }


